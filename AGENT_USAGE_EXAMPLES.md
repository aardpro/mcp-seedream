# Agent 使用示例

本文档展示了当用户提出各种图像创建请求时，Agent应如何调用MCP Seedream工具。

## 何时调用 `generate_image` 工具

当用户请求以下类型的内容时，Agent必须调用 `generate_image` 工具：

- 创建/生成/制作图像、图片、插图
- 绘制/设计视觉内容
- 可视化概念、想法、描述
- 生成艺术作品、照片、肖像、风景、场景
- 制作概念图、设计图
- 创建卡通、动漫、海报、封面
- 设计图标、徽标

## 使用场景示例

### 1. 文本到图像生成

**用户请求**: "帮我生成一张未来城市夜景的图像"

**Agent调用**:
```json
{
  "name": "generate_image",
  "arguments": {
    "prompt": "一张未来城市夜景的图像，霓虹灯闪烁，飞行汽车穿梭，摩天大楼林立",
    "size": "2K",
    "style": "vivid",
    "output_dir": "./images"
  }
}
```

### 2. 图像到图像生成

**用户请求**: "将这张图片的背景改为海滩场景"

**Agent调用**:
```json
{
  "name": "generate_image",
  "arguments": {
    "prompt": "将背景改为海滩场景，阳光明媚，蓝天白云，沙滩上有棕榈树",
    "image": "./path/to/local/image.jpg",
    "size": "2K",
    "output_dir": "./images"
  }
}
```

### 3. 多图像融合

**用户请求**: "将这两张图片的元素合成一个场景"

**Agent调用**:
```json
{
  "name": "generate_image",
  "arguments": {
    "prompt": "将这两张图片的元素合成一个场景，保持风格一致",
    "image": ["./path/to/local/image1.jpg", "./path/to/local/image2.png"],
    "size": "2K",
    "output_dir": "./images"
  }
}
```

### 4. 多次尝试生成（新功能）

**用户请求**: "尝试五次生成，直到得到满意的效果"

**Agent调用**:
```json
{
  "name": "generate_image",
  "arguments": {
    "prompt": "一张未来城市夜景的图像，霓虹灯闪烁，飞行汽车穿梭，摩天大楼林立",
    "size": "2K",
    "style": "vivid",
    "attempts": 5,
    "output_dir": "./images"
  }
}
```

## 常见用户请求模式

### 描述性请求
- "画一个..." / "创建一个..." / "生成一个..."
- "设计一张..." / "制作一个..." / "生成一幅..."
- "可视化..." / "展示..." / "呈现..."

### 具体内容类型
- **艺术作品**: "画一幅油画" / "创作一幅水彩画"
- **照片**: "生成一张照片" / "制作一张写实图片"
- **卡通动漫**: "画一个卡通人物" / "生成动漫风格图像"
- **设计**: "设计一个logo" / "制作一个图标"
- **场景**: "创建一个风景" / "生成一个室内场景"

## 参数说明

- `prompt`: 必需，详细描述要生成的图像内容
- `output_dir`: 必需，指定图像保存目录
- `size`: 可选，图像尺寸（默认2K）
- `style`: 可选，图像风格（vivid/natural）
- `n`: 可选，生成图像数量（1-10）
- `attempts`: 可选，生成图像的尝试次数（1-10，默认1）。当指定多次尝试时，将使用相同的提示词和参考图像重复生成，直到达到指定次数
- `target_filename`: 可选，目标文件名
- `image`: 可选，输入图像（用于图像到图像或多图像融合）

## 注意事项

1. **必需参数**: `prompt` 和 `output_dir` 是必需的
2. **智能处理**: 如果用户提供本地文件路径，工具会自动上传到MinIO
3. **文件扩展名**: 生成的文件会根据URL或默认规则添加适当的扩展名
4. **安全验证**: 文件名会经过安全验证以防止路径遍历攻击